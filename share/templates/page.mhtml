<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Language" content="en" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="<% ref $calendar |h %> v<% $calendar->VERSION |h%>" />
    <link rel="alternate" title="<% $calendar->title |h %> XML feed" href="atom.xml" type="application/atom+xml" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="stylesheet" href="style.css" type="text/css" />
% for ($calendar->css_hrefs) {
    <link rel="stylesheet" href="<% $_ |h %>" type="text/css" />
% }
    <title><& SELF:title, %ARGS &></title>
</head>
<body>
    <div id="contentwrapper">
        <div id="header">
            <h1><a href="index.html"><% $calendar->title |h %></a></h1>
        </div>

        <p id="tagline"><% $calendar->year %> <% $calendar->tagline // '' |h %>
        </p>

        <div id="content">
          <& SELF:content, %ARGS &>
        </div>

% my $year = $calendar->year;
% my $last_year  = $year - 1;
% my $next_year  = $year + 1;
% my ($last_year_span, $next_year_span) = ($last_year, $next_year);
% my ($last_year_dir,  $next_year_dir);
% if ($calendar->output_dir =~ /$year$/ ) {
%   ($last_year_dir  = $calendar->output_dir) =~ s/${year}$/$last_year/;
%   ($next_year_dir  = $calendar->output_dir) =~ s/${year}$/$next_year/;
%
%   if (-d $last_year_dir) {
%     $last_year_span = qq{<a href="../$last_year" title="$last_year">$last_year</a>};      
%   }
%
%   if (-d $next_year_dir) {
%     $next_year_span = qq{<a href="../$next_year" title="$next_year">$next_year</a>};      
%   }
% }

        <p id="feedline">
          <span><% $last_year_span %></span> :: <span><% $next_year_span %></span>
          <a class='feed' href="atom.xml">Feed</a>
        </p>
    </div>
% if ($tracker_id) {
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("<% $tracker_id %>");
pageTracker._trackPageview();
} catch(err) {}</script>
% }
</body>
</html>

<%method title>
% my $subtitle = $m->scomp('SELF:subtitle', %ARGS);
% $subtitle = " - $subtitle" if ($subtitle||'') =~ /\S/;
<% $calendar->title |h %><% $subtitle %>
</%method>

<%method subtitle></%method>

<%args>
$article    => undef
$tracker_id => undef
</%args>
